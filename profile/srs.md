# Software Requirements Specification (SRS)

## Project Title
멀티모달 분석(OCR·이미지·음성)을 활용한 보이스피싱 탐지 어플리케이션 '구해줘 피싱!(Guppy)'

## Project Description
본 프로젝트는 보이스피싱 범죄를 다각적으로 탐지하기 위해 OCR, 음성 분석, 컴퓨터 비전(CV) 기법을 융합한 모바일 애플리케이션을 개발한다.

제안 시스템은 (1) 통화 음성 데이터에서 의심 키워드를 실시간 분석하고, (2) 문자·문서 이미지를 OCR 기반으로 처리하여 피싱 패턴을 탐지하며, (3) 위조 문서 내 직인 영역을 컴퓨터 비전 기법으로 검출·분석한다.

이를 통해 사용자는 다양한 형태의 보이스피싱 시도에 대해 즉각적인 경고를 받을 수 있으며, 금융 범죄 예방 및 사회적 안전망 강화에 기여할 수 있다.

## Team Members
| Student ID | Name   |
|------------|--------|
| 22012286   | 김민서 |
| 22010958   | 김성현 |
| 22112144   | 류효정 |
| 22012124   | 박윤호 |
| 22212125   | 윤찬익 |
| 22112102   | 최현수 |

---

## 1. 요구사항 정의 (Requirements Description)

| ID   | 업무명 (기능) | 요약 | 세부요구사항 설명 | 입력변수 | 정상 입력값 partitioning | 예외 입력값 partitioning | 추적성 | 우선순위 | 테스트 결과 |
|------|---------------|---------|----------------------|-----------------|---------------|--------------------|--------------|----------|-------------|
| 1    | 보이스피싱 의심 통화 확인 |  | API : api/voice-phishing/analyze-audio |  | media: 음성 파일 업로드( mp3, wav, mp4)<br> language: ko-KR<br> analysis_method: hybrid| 음성 파일이 아닌 파일 업로드 |  |  |  |
| 1.1  | STT 변환 | NAVER Cloud의 CLOVA Speech 서비스로 STT 변환한다. |  |  |  |  |  |  |  |
| 1.1.1 |  |  | 앱은 통화가 종료된 후 녹음된 오디오 파일을 HTTP POST로 서버에 업로드한다.  | 미디어 파일 | CASE 1: mp3/wav/mp4 등 지원 포맷<br>CASE 2: 업로드 완료<br>CASE 3: 파일 크기 정상 | CASE 1: media 필드 누락<br>CASE 2: 파일 포맷 오류<br>CASE 3: 업로드 중 네트워크 끊김 |  | H | P |
| 1.1.2 |  |  | 서버는 업로드된 오디오 파일을 NAVER CLOVA Speech로 전송하고, 전체 STT 결과를 수신한다. | 업로드된 음성 파일 API 인증 정보 | CASE 1: CLOVA 지원 포맷(Pcm·mp3·wav 등)<br>CASE 2: REST API 응답 정상<br>CASE 3: 인증키 유효 | CASE 1: 지원되지 않는 오디오 포맷<br>CASE 2: API 인증 실패(401/403)<br>CASE 3: CLOVA 서버 오류 또는 응답 지연 |  | H | P |
| 1.1.3 | | | 서버는 CLOVA에서 받은 STT 전체 JSON을 그대로 저장하고, 그중 변환된 텍스트만 뽑아 보이스피싱 분석에 사용한다.  | CLOVA Speech STT 결과 데이터 | CASE 1: 변환된 전체 텍스트 포함<br>CASE 2: wordAlignment 기반 타임스탬프 포함<br>CASE 3: 구두점 포함 텍스트 정상 | CASE 1: 손상된 STT 결과 데이터<br>CASE 2: CLOVA 오류 코드 포함 응답<br>CASE 3: STT 결과 없음(무음 파일) | 6.5.1 | H | P |
| 1.2  | 실시간 보이스피싱 탐지 | 통화 중 음성을 실시간으로 분석하여 위험 여부를 즉시 판단한다. | 권한 문제로 앱에서는 실행 불가<br>웹사이트를 통해 실시간 보이스피싱 로직은 검증완료 |  |  |  |  |  | 세부요구사항 설명 참고바랍니다. |
| 1.2.1 | | | 통화 중 앱에서 캡처한 음성 데이터를 WebSocket을 이용해 일정한 크기의 오디오 조각(chunk) 형태로 서버에 실시간 전송한다. | 오디오 스트림(PCM 16kHz, mono) | CASE 1: 안정적인 WebSocket 연결<br>CASE 2: 오디오 스트림 규격 일치(PCM, 16kHz, Mono)<br>CASE 3: 클라이언트 지속 전송 | CASE 1: WebSocket 연결 끊김<br>CASE 2: 오디오 포맷 불일치<br>CASE 3: 장시간 무응답/과도한 지연 |  | H | F |
| 1.2.2 | | | 서버는 수신한 오디오 조각을 NAVER CLOVA Speech의 실시간 STT gRPC 엔드포인트로 전송하여 partial/final STT 결과를 수신한다. |음성 데이터(gRPC 스트림)<br> API 인증 정보 | CASE 1: CLOVA 지원 포맷(PCM 16kHz)<br>CASE 2: 안정적인 gRPC 연결 유지<br>CASE 3: 유효한 API 인증 정보 | CASE 1: 지원하지 않는 오디오 포맷<br>CASE 2: gRPC 연결 실패 또는 중단<br>CASE 3: API 인증 실패/권한 없음 |  | H | F |
| 1.2.3 | | | CLOVA gRPC로부터 수신한 partial·final STT 결과를 기반으로 즉각적으로 보이스피싱 위험 키워드를 분석하며, final 문장 단위에서는 KoBERT 모델을 이용한 종합 분석을 수행한다. 분석 결과는 WebSocket으로 앱에 즉시 전송한다. | CLOVA Speech STT partial/final 결과 | CASE 1: 변환된 텍스트 존재<br>CASE 2: 타임스탬프 포함<br>CASE 3: final 문장에서 모델 분석 수행 | CASE 1: 손상된 partial 데이터 수신<br>CASE 2: CLOVA 내부 오류 코드 반환<br>CASE 3: 응답 시간 초과/delayed final | 6.5.1 | H | F |
| 1.3  | 의심 경고 | 위험도가 특정 기준을 초과하면 경고 메시지를 표시한다. |  |  |  |  |  |  |  |
| 1.3.1 | | | 위험도가 특정 기준을 초과하면, 서버는 앱 화면에 보이스피싱 경고 메시지를 표시한다. | 위험도 값 | CASE 1: 경고 조건 충족<br>CASE 2: 앱과 정상 통신 | CASE 1: 잘못된 데이터 수신<br>CASE 2: 앱과 통신 실패<br>CASE 3: 앱 응답 시간 초과 | 6.5.2 | L | P |
| 2    | 문서 위조 판별 |  | API : process-request |  | 이미지 파일 업로드(JPG, PNG 등)<br>크기 10MB 이하의 이미지 파일 | 정상적이지 않은 이미지 파일 업로드(이미지 파일이 아닌 형식 또는 손상된 파일)<br>크기 10MB 이상의 이미지 파일 |  |  |  |
| 2.1  | 의심 키워드 판별 | OCR을 통해 추출한 문서 내 텍스트를 기반으로 위조 의심 여부를 판단한다. |  |  |  |  |  |  |  |
| 2.1.1 | | | 시스템은 사용자로부터 문서 이미지 파일(JPG, PNG)을 입력받는다. | 이미지 파일(JPG, PNG) | CASE 1: 정상 이미지(JPG/PNG)<br>CASE 2: 텍스트가 포함된 문서 이미지<br>CASE 3: 파일 크기가 적정 범위 | CASE 1: 비지원 파일 형식<br>CASE 2: 손상된 이미지 파일<br>CASE 3: 서버에서 이미지 파일을 찾을 수 없음(FileNotFoundError) | 6.1 | H | P |
| 2.1.2 | | | 서버는 CLOVA OCR API를 호출하여 이미지에서 텍스트를 추출하고, API 응답을 JSON 구조의 데이터로 수신한다. | 이미지 파일<br>CLOVA OCR API URL<br>CLOVA Secret Key<br>OCR API 응답(JSON) | CASE 1: CLOVA OCR API가 200 OK 응답<br>CASE 2: OCR 응답 JSON이 정상 형식 유지<br>CASE 3: OCR 결과에서 텍스트 필드가 존재 | CASE 1: CLOVA API 인증 실패(401/403)<br>CASE 2: API 응답 코드가 200이 아님(4xx/5xx)<br>CASE 3: OCR 응답 JSON 파싱 실패<br>CASE 4: 텍스트 추출 실패(None 또는 빈 문자열) | 6.2.2 | M | P |
| 2.1.3 | | | 시스템은 OCR 결과(JSON)에서 텍스트를 분석하여 사전에 정의된 의심 키워드를 탐지하고, 각 키워드의 위험 등급에 따라 점수를 누적한다. | OCR 결과(JSON)<br>의심 키워드 목록 | CASE 1: 텍스트 데이터가 유효함<br>CASE 2: 의심 키워드가 포함된 경우<br>CASE 3: 의심 키워드가 없는 경우 | CASE 1: OCR 텍스트 필드가 None 또는 ""<br>CASE 2: 텍스트 인코딩 오류<br>CASE 3: 키워드 목록은 코드 내부 상수이므로 로딩 실패는 없음(발생 불가) | 6.3.1 | M | P |
| 2.1.4 | | | 의심 키워드 분석을 통해 산출된 점수를 기반으로 문서의 위험 수준을 판단하며, 해당 위험 수준은 점수 범위에 따라 '안전', '주의', '위험'의 3단계로 구분되어 사용자에게 제공된다. | OCR 결과(JSON)<br>의심 키워드 분석 점수(total_score)<br>최종 위험 판단에 사용되는 종합 점수(final_risk) | CASE 1: OCR 텍스트가 정상적으로 추출됨<br>CASE 2: 의심 키워드 분석이 정상적으로 수행되어 점수가 산출됨<br>CASE 3: 산출된 점수가 정상 범위 내에서 위험 수준(안전/주의/위험)으로 정상적으로 판단됨 | CASE 1: OCR 결과 텍스트가 None 또는 빈 값<br>CASE 2: 키워드 분석 점수 계산 오류<br>CASE 3: 위험 수준 판단에 사용되는 점수가 비정상 값(Null, NaN, 음수 등) | 6.4.1 | L | P |
| 2.2  | 레이아웃 분석 | OCR을 통해 추출한 문서 내 텍스트의 레이아웃 정보를 분석하여 위조 의심 여부를 판단한다. |  |  |  |  |  |  |  |
| 2.2.1 | | | 시스템은 사용자에게 이미지 파일을 입력받는다. | 이미지 파일 | CASE 1: 지원 파일 형식 (JPG, PNG)<br>CASE 2: 제한 크기 이내 파일<br>CASE 3: 갤러리 접근 권한 허용 | CASE 1: 미지원 파일 형식<br>CASE 2: 파일 크기 제한 초과<br>CASE 3: 접근 권한 거부 | 6.1 | H | P |
| 2.2.2 | | | 시스템은 OCR을 통해 추출한 텍스트의 위치, 크기 등 레이아웃 정보를 입력받는다. | OCR 레이아웃 데이터 | CASE 1: 유효한 데이터 형식 (JSON)<br>CASE 2: 위치/크기 정보 포함<br>CASE 3: 텍스트 없는 경우 (빈 값) | CASE 1: 손상된 데이터<br>CASE 2: 필수 정보 누락<br>CASE 3: 유효하지 않은 값 (음수 등) | 6.2.3 | M | P |
| 2.2.3 | | | 입력된 레이아웃 정보를 기반으로 사전에 정의된 4가지 배치 규칙(줄 간격, 높이, 정렬, 단어 간격)의 일관성을 검사하여 점수를 계산한다. | 레이아웃 정보<br>배치 규칙 | CASE 1: 유효한 레이아웃 정보<br>CASE 2: 분석 가능한 텍스트 요소<br>CASE 3: 정상적으로 불러온 규칙 | CASE 1: 손상된 레이아웃 정보<br>CASE 2: 분석 불가능 (요소 부족)<br>CASE 3: 규칙 불러오기 실패 | 6.3.2 | M | P |
| 2.2.4 | | | 레이아웃 규칙 분석을 통해 산출된 점수(layout_score)는 문서의 종합 위험도(final_risk)를 판단하는 요소 중 하나로 활용되며, 점수는 최종 분석 결과에 포함되어 사용자에게 제공된다. | 레이아웃 분석 점수(layout_score) | CASE 1: 레이아웃 점수가 정상적으로 산출됨<br>CASE 2: 산출된 점수가 종합 위험도 계산에 정상적으로 반영됨<br>CASE 3: UI에서 해당 점수가 위조 의심 항목으로 정상 표시됨 | CASE 1: 산출된 점수가 None 또는 NaN 등 비정상 값<br>CASE 2: 점수 계산 중 오류 발생<br>CASE 3: UI에서 표시할 수 없는 값(음수 등)이 전달됨 | 6.4.1 | L | P |
| 2.3  | 문서 내 직인 탐지 | openCV를 통해 문서 내 직인 요소를 찾아 위조 의심 여부를 판단한다. |  |  |  |  |  |  |  |
| 2.3.1 | | | 시스템은 업로드된 문서 이미지에서 색상 마스크와 형태학적 연산(모폴로지 연산)을 통해 직인 후보 영역을 추출한다. | 문서 이미지 파일 | CASE 1: 지원 파일 형식 (JPG, PNG)<br>CASE 2: 분석 가능한 해상도<br>CASE 3: 직인 포함 가능성 있는 문서 | CASE 1: 손상된 이미지 파일<br>CASE 2: 해상도가 너무 낮은 이미지<br>CASE 3: 분석 불가능한 이미지 (단색 등) | 6.1 | M | P |
| 2.3.2 | | | 컨투어 탐색 및 면적 기준 필터링을 수행하여 직인으로 추정되는 영역의 위치와 크기를 산출한다. | 직인 후보 영역 데이터 | CASE 1: 분석 가능한 컨투어 존재<br>CASE 2: 면적 기준 내 컨투어 포함<br>CASE 3: 유효한 데이터 형식 | CASE 1: 감지된 컨투어 없음<br>CASE 2: 손상된 입력 데이터<br>CASE 3: 모든 컨투어 기준 미달 | 6.3.3 | M | P |
| 2.3.3 | | | 	직인 후보 영역 개수를 기반으로 단순 점수를 산출한다. | 직인 후보 영역 개수 | CASE 1: 영역 1개 이상 감지<br>CASE 2: 점수 계산 정상 | CASE 1: 감지된 영역 없음<br>CASE 2: 점수 None/NaN 등 비정상 값 | 6.3.3 | M | P |
| 2.3.4 | | | 	산출된 점수는 문서 종합 위험도(final_risk) 계산 시 30% 비중으로 반영되며, 결과 JSON에도 포함되어 사용자에게 전달된다. | 최종 점수 | 0.0~1.0 정상 점수 | CASE 1: 숫자가 아닌 값<br>CASE 2: 데이터 누락 (Null)<br>CASE 3: 유효 범위 초과 점수 | 6.3.3 | M | P |
| 3    | 피싱 의심 메시지 확인 |  | API : api/sms/detect_json |  |   "urls": ["http://103.99.210.5/"], <br> "texts": ["대출 가능하며 계좌번호 알려주시면 송금해드리겠습니다"]<br> URL이나 텍스트 중 하나라도 포함된 경우 |   "urls": [  ],<br> "texts": [  ]<br>모두 비어있을 때 |  |  |  |
| 3.1  | 피싱 의심 메시지 내용 분석 | 메시지 내 텍스트를 기반으로 의심 여부를 판단한다. |  |  |  |  |  |  |  |
| 3.1.1 | | | 사용자가 메시지를 수신하면 앱은 텍스트 배열(texts)을 서버로 전송하고, 서버는 이를 하나의 문자열로 병합하여 분석 가능한 상태로 변환한다. | 수신 메시지 텍스트 | CASE 1: 일반적인 문자 메시지<br>CASE 2: 발신자 와이파이/데이터 OFF<br>CASE 3: 수신자 데이터 ON | CASE 1: 텍스트 없는 메시지 (공백)<br>CASE 2: 발신자 와이파이/데이터 ON<br>CASE 3: 수신자 데이터 OFF | | M | P |
| 3.1.2 | | | 전처리된 텍스트를 서버로 전송하여 워험도 점수를 계산한다 | 전처리된 텍스트 | CASE 1: 서버로 정상 전송<br>CASE 2: 의심 키워드 포함 텍스트<br>CASE 3: 일반 텍스트 | CASE 1: 서버 내부 처리 중 오류 발생<br>CASE 2: 분석 함수에서 예외 발생<br>CASE 3: 잘못된 데이터 형식 | 6.6.1 | L | P |
| 3.1.3 | | | 서버에서 계산된 최종 점수를 바탕으로 0~3 사이의 4단계 위험 레벨을 판정하여 사용자에게 제공한다. | 위험도 점수 | CASE 1: Level 0 (안전)<br>CASE 2: Level 1 (의심)<br>CASE 3: Level 2 (경고)<br>CASE 4: Level 3 (위험) | CASE 1: 숫자가 아닌 값 전달<br>CASE 2: 데이터 누락 (Null)<br> CASE 3: 점수가 0~100 범위를 벗어난 값 | 6.6.2 | L | P |
| 3.2  | 의심 링크 검증 | 메시지에 첨부된 외부 링크의 조작 여부를 판단한다. |  |  |  |  |  |  |  |
| 3.2.1 | | | 사용자가 URL을 포함한 메시지를 수신하면, 서버는 URL의 기본 형식과 길이 등을 검증하여 분석 가능한 상태인지 확인한다. | URL 주소 | CASE 1: http/https 형식<br>CASE 2: 단축 URL<br>CASE 3: www 포함/미포함 주소 | CASE 1: URL 형식이 아닌 텍스트<br>CASE 2: 입력값 없음 (Null)<br>CASE 3: URL 길이가 비정상적으로 짧음 | | M | P |
| 3.2.2 | | | 시스템은 단축 URL인 경우 원본 URL로 확장하고, 확장된 URL에서 도메인을 추출한다. | URL 주소 | CASE 1: 유효한 URL 형식<br>CASE 2: 확장 가능한 단축 URL<br>CASE 3: 정상적인 서버 응답 | CASE 1: 유효하지 않은 URL 형식<br>CASE 2: URL 확장 실패<br>CASE 3: 서버 응답 시간 초과 | | M | P |
| 3.2.3 | | | 추출된 도메인이 PhishTank 기반 블랙리스트에 포함되어 있는지 확인한다. | URL, phishing_urls.txt (PhishTank 기반 DB) | CASE 1: 블랙리스트에 도메인 존재<br>CASE 2: PhishTank DB에 존재하지 않음 | CASE 1: PhishTank DB 파일 로드 실패<br>CASE 2: 도메인 추출 실패<br>CASE 3: PhishTank DB 접근 실패(파일 오류) | | M | P |
| 3.2.4 | | | URL 특징 기반 분석 점수를 종합하여 0~3 단계의 위험 레벨로 분류한다. | 분석된 URL 특징 점수 | CASE 1: Level 0 (안전)<br>CASE 2: Level 1 (의심)<br>CASE 3: Level 2 (경고)<br>CASE 4: Level 3 (위험) | CASE 1: 점수가 숫자가 아님<br>CASE 2: 점수 데이터 누락<br>CASE 3: 점수 범위 벗어남 | | M | P |
| 4    | 회원가입 |  | API <br> auth/signup <br> /auth/kakao/login <br> /auth/kakao/callback <br> /auth/naver/login <br> /auth/naver/callback |  | { <br> "email": "test@example.com", <br> "full_name": "test",<br> "password": "test1234!", <br>   "phone": "010-1234-5678"<br> } <br> 1.이메일 형식 @가 포함되어야 함.<br>2.비밀번호는 최소 8자리 이상이어야 함. | { <br>  "email": "test8", <br>   "full_name": "test", <br>   "password": "1234!", <br>   "phone": "010-1234-5678"<br>}<br>1. 이메일 형식이 아니라서 에러 발생<br>2. 비밀번호 최소 기준 미만이라 에러 발생 |  |  |  |
| 4.1  | 사용자 정보 입력 및 검증 | 사용자가 회원가입을 위해 필수 정보를 입력하고 시스템이 입력값의 유효성을 검증한다. |  |  |  |  |  |  |  |
| 4.1.1 | | | 사용자가 이메일 주소를 입력하면 시스템은 이메일 형식의 유효성을 검증하고, 중복 여부를 확인한다. | 사용자 입력 이메일 | <CASE 1: 유효한 이메일 형식<br>CASE 2: 중복되지 않은 이메일<br> "email": "test@example.com" | CASE 1: 유효하지 않은 형식<br> "email": "test8" -> 이메일 형식이 아니라서  422 Unprocessable Entity 에러가 발생 <br> CASE 2: 이미 가입된 이메일<br>CASE 3: 값을 입력하지 않음 | | L | P |
| 4.1.2 |  |  | 사용자가 비밀번호를 입력하면 시스템은 보안 정책에 따라 비밀번호 강도를 검증하고 확인 입력을 통해 일치 여부를 확인한다. | 비밀번호,<br>비밀번호 확인 | CASE 1: 강한 비밀번호 (8자 이상, 영문+숫자+특수문자)<br>CASE 2: 중간 강도 비밀번호 (8자 이상, 영문+숫자)<br>CASE 3: 두 비밀번호 입력이 일치 <br>  "password": "test1234!" | CASE 1: 너무 짧은 비밀번호 (8자 미만)<br> "password": "123!" -> 최소 기준 8자리 미만이라서 422 Unprocessable Entity 발생 <br> CASE 2: 단순한 패턴 (123456, password 등) <br> CASE 3: 비밀번호 불일치 |  | L | P |
| 4.1.3 |  |  | 사용자가 이름, 전화번호 등 개인정보를 입력하면 시스템은 각 항목의 형식과 필수 여부를 검증한다. | 이름,<br>전화번호 | CASE 1: 한글 이름 (2-10자)<br>  "full_name": "테스트",<br>CASE 2: 정상 휴대폰 번호 (010-xxxx-xxxx, 01012345678)<br> "phone": "010-1234-5678" | CASE 1: 특수문자, 숫자 포함 이름<br>CASE 2: 잘못된 전화번호 형식|  | L | P |
| 4.1.4 |  |  | 소셜 계정을 통해 인증을 완료하면, 시스템은 소셜 플랫폼으로부터 사용자 정보를 전달받아 회원가입을 처리한다. | 사용자 소셜 계정 정보 (이메일, 이름) | CASE 1: 가입되어 있는 유효한 소셜 로그인 계정 | CASE 1 : 인증 코드 만료<br>토큰 검증 실패→ 401 Unauthorized 에러 발생 <br> CASE 2 : 소셜 서버 통신 실패<br>외부 API 오류→ 502 Bad Gateway 에러 발생|  | L | P |
| 4.2  | 계정 생성 및 프로필 설정 | 인증이 완료된 사용자 정보로 계정을 생성하고 초기 프로필을 설정한다. |  |  |  |  |  |  |  |
| 4.2.1 |  |  | 시스템은 검증된 사용자 정보를 데이터베이스에 저장하여 새로운 사용자 계정을 생성한다. | 검증된 사용자 정보 (이메일, 비밀번호, 개인정보) | CASE 1: 모든 필수 정보 입력 완료<br>CASE 2: 선택 정보 일부 누락<br>CASE 3: 추가 정보 입력 완료 | CASE 1: 데이터베이스 연결 오류<br>CASE 2: 중복 계정 생성 시도<br>CASE 3: 저장 공간 부족 |  | L | P |
| 4.2.2 |  |  | 회원가입이 성공적으로 완료되면 사용자에게 환영 메시지를 표시한다. | 완료된 사용자 계정 | CASE 1: 정상 회원가입 완료<br>CASE 2: 추가 정보 입력 권유 | CASE 1: UI 표시 오류<br>CASE 2: 환영 메일 발송 실패 |  | L | P |
| 5    | 로그인 |  | API <br> auth/login <br> /auth/kakao/login <br> /auth/kakao/callback <br> /auth/naver/login <br> /auth/naver/callback |  | {<br>  "email": "test@example.com",<br>  "password": "test1234!"<br>}<br>1.이메일 형식 @가 포함되어야 함.<br>2.비밀번호는 최소 8자리 이상이어야 함. | {<br>"email": "test",<br>  "password": "test1234!"<br>}<br>이메일 형식 아닌 값 입력 시 422 Unprocessable Entity 발생<br>{<br> "email": "test@example.com",<br>  "password": "1234!"<br>}<br>패스워드 미일치 시 401 Unauthorized 에러 발생 |  |  |  |
| 5.1  | 사용자 인증 | 등록된 사용자가 이메일과 비밀번호를 입력하여 신원을 확인하고 앱에 접근한다. |  |  |  |  |  |  |  |
| 5.1.1 |  |  | 사용자가 이메일 주소와 비밀번호를 입력하면 시스템은 입력값의 기본적인 형식을 검증한다. | 이메일,<br>비밀번호 | CASE 1: 등록된 이메일과 정확한 비밀번호<br>CASE 2: 대소문자 구분 없는 이메일 입력<br>CASE 3: 앞뒤 공백이 있는 입력값 | CASE 1: 빈 입력값 (이메일 또는 비밀번호 누락)<br> CASE 2: 잘못된 이메일 형식 <br>CASE 3: 등록되지 않은 이메일<br>"email": "test"<br>이메일 형식 아닌 값 입력 시 422 Unprocessable Entity 발생 |  | L | P |
| 5.1.2 |  |  | 시스템은 입력된 이메일로 사용자 계정을 조회하고, 암호화된 비밀번호와 입력된 비밀번호를 비교하여 인증한다. | 사용자 이메일,<br>입력된 비밀번호 | CASE 1: 정확한 계정 정보 매칭<br>CASE 2: 활성화된 계정 상태<br>CASE 3: 비밀번호 해시 검증 성공 | CASE 1: 계정이 존재하지 않음<br>-> 존재하지 않는 이메일 입력 시 401 Unauthorized 에러 발생<br> CASE 2: 비밀번호 불일치<br>-> 패스워드 미일치 시 입력값이 일치하지 않는다는 401 Unauthorized 에러 발생<br>CASE 3: 비활성화된 계정 (정지, 삭제 등) |  | L | P |
| 5.1.3 |  |  | 소셜 플랫폼을 통해 로그인을 시도하면,<br> 시스템은 소셜 플랫폼으로부터 전달받은 인증 코드 또는 토큰을 검증하고<br>해당 소셜 계정과 연동된 사용자 정보를 조회하여 로그인을 처리한다. | 사용자의 소셜 계정 정보<br>(이메일, 이름) | CASE 1: 유효한 소셜 인증 코드 또는 토큰<br>CASE 2: 이미 가입되어 있는 소셜 계정<br>CASE 3: 활성화된 사용자 계정 | CASE 1: 인증 코드 만료 또는 토큰 위조<br>→ 토큰 검증 실패로 401 Unauthorized 발생<br>CASE 2: 존재하지 않는 소셜 계정<br>→ 인증 실패로 401 Unauthorized 발생<br>CASE 3: 소셜 서버 통신 실패<br>→ 외부 API 오류로 502 Bad Gateway 발생 |  | L | P |
| 5.2  | 세션 관리 | 성공적인 로그인 후 사용자 세션을 생성하고 관리한다. |  |  |  |  |  |  |  |
| 5.2.1 |  |  | 인증이 성공하면 시스템은 고유한 세션 토큰을 생성하여 사용자의 로그인 상태를 유지한다. | 인증된 사용자 ID | CASE 1: 새로운 세션 토큰 생성<br>CASE 2: 보안 토큰 생성 (JWT 방식) | CASE 1: 토큰 생성 알고리즘 오류<br>CASE 2: 세션 저장소 접근 실패<br>CASE 3: 토큰 중복 생성 |  | L | P |
| 5.2.2 |  |  | 생성된 세션 토큰을 안전하게 저장하고 적절한 만료 시간을 설정한다. | 세션 토큰,<br>사용자 설정(자동 로그인 등) | CASE 1: 기본 세션 (24시간 유효)<br>CASE 2: 자동 로그인 (30일 유효)<br>CASE 3: 보안 모드 (4시간 유효) | CASE 1: 세션 저장 공간 부족<br>CASE 2: 만료 시간 설정 오류<br>CASE 3: 세션 암호화 실패 |  | L | P |
| 6    | 네트워크 API |  |  |  |  |  |  |  |  |
| 6.1  | 이미지 업로드 API | 사용자가 문서 이미지를 서버로 업로드할 수 있도록 한다. |  |  |  |  | 2.1.1 2.3.1 |  |  |
| 6.1.1 |  |  | 단일 이미지 파일을 서버에 업로드할 수 있어야 한다. 서버는 업로드된 이미지를 검증 후 저장한다. | 이미지 파일 | CASE 1: 허용 확장자(JPG, PNG)<br>CASE 2: 허용 용량(100MB 이하) | CASE 1: 미허용 확장자<br>CASE 2: 용량 초과(100MB 이상)<br>CASE 3: 손상된 파일 |  | H | P |
| 6.1.2 |  |  | 여러 개의 이미지 파일을 동시에 업로드할 수 있어야 한다. 서버는 다중 업로드된 이미지를 리스트로 관리하고 순차 처리한다. | 이미지 파일 목록 | CASE 1: 다중 파일(2\~10개)<br>CASE 2: 허용 확장자 혼합 | CASE 1: 목록 내 손상된 이미지 포함<br>CASE 2: 파일 목록 없음<br>CASE 3: 목록 내 비허용 파일 포함 |  | L | P |
| 6.2  | OCR 연동 API | 업로드된 이미지를 OCR 모듈에 전달하여 텍스트를 추출한다. |  |  |  |  |  |  |  |
| 6.2.1 |  |  | 서버는 이미지 파일을 OCR 모듈로 전송한다. | 이미지 데이터 | CASE 1: 유효한 이미지<br>CASE 2: 적정 해상도 | CASE 1: 데이터 전송 실패<br>CASE 2: OCR 모듈 연결 끊김<br>CASE 3: 타임아웃 |  | H | P |
| 6.2.2 |  |  | 이미지에서 텍스트를 추출해 JSON 파일을 만든다. | OCR 출력 데이터(텍스트) | CASE 1: 텍스트 추출 성공<br>CASE 2: 빈 텍스트 추출 | CASE 1: 출력 데이터 오류(비정형)<br>CASE 2: JSON 변환 실패(구문 오류)<br>CASE 3: 필수 필드 누락 | 2.1.2 | H | P |
| 6.2.3 |  |  | 텍스트의 위치, 크기 등 레이아웃 정보를 추출한다. | OCR 출력 데이터(텍스트, 좌표) | CASE 1: 모든 텍스트의 좌표 추출 성공<br>CASE 2: 텍스트 블록별 좌표 추출<br>CASE 3: 빈 텍스트 추출 | CASE 1: 좌표 정보 누락<br>CASE 2: 비정상적인 좌표값(음수 등)<br>CASE 3: OCR 원본 데이터 오류 | 2.2.1 | H | P |
| 6.2.4 |  |  | OCR 모듈에서 변환된 텍스트 결과를 서버가 수신한다. | OCR 응답 데이터(JSON) | CASE 1: 정상적인 텍스트 결과 수신<br>CASE 2: 빈 텍스트 결과 수신 | CASE 1: 데이터 형식 오류(JSON 파싱 실패)<br>CASE 2: 연결 끊김/전송 실패<br>CASE 3: 서버 수신 타임아웃 |  | H | P |
| 6.3  | 위조 판별 API | OCR 및 OpenCV 기반 로직으로 위조 여부를 판별한다. |  |  |  |  |  |  |  |
| 6.3.1 |  |  | 텍스트 기반 분석을 수행한다. 위험 키워드, 반복 패턴 등을 점수화하여 판별한다. | 분석 대상 텍스트,<br>위험 키워드 리스트,<br>패턴 분석 모델 | CASE 1: 정상적인 텍스트 입력<br>CASE 2: 위험 키워드 포함 텍스트<br>CASE 3: 반복 패턴 포함 텍스트 | CASE 1: 빈 텍스트 입력<br>CASE 2: 분석 모델 로딩 실패 | 2.1.3 | M | P |
| 6.3.2 |  |  | 레이아웃 기반 분석을 수행한다. 줄 간격, 정렬, 간격 등 규칙 위반 시 점수를 가산한다. | 텍스트 레이아웃 정보,<br>레이아웃 규칙 셋 | CASE 1: 규칙을 준수한 레이아웃<br>CASE 2: 경미한 규칙 위반 포함<br>CASE 3: 규칙 위반 항목 다수 포함 | CASE 1: 레이아웃 정보 불충분<br>CASE 2: 분석 중단 오류 발생<br>CASE 3: 측정 불가능한 데이터 | 2.2.2 | M | P |
| 6.3.3 |  |  | 직인 탐지 분석을 수행한다. 위조 가능성을 평가한다. | 이미지 영역(직인 후보 영역),<br>직인 원본 데이터 | CASE 1: 정상적인 직인 탐지<br>CASE 2: 직인 탐지 실패<br>CASE 3: 탐지된 직인이 원본과 일치 | CASE 1: 탐지 영역 오류<br>CASE 2: 원본 데이터 연결 실패<br>CASE 3: 위조된 직인 | 2.3.3 | M | P |
| 6.4  | 결과 반환 API | 최종 위조 판별 결과를 클라이언트에 반환한다. |  |  |  |  |  |  |  |
| 6.4.1 |  |  | 문서별 위험도 점수와 상태(정상/의심/위조)를 포함한다. | 분석된 점수 리스트<br>분석 결과(텍스트, 레이아웃, 직인) | CASE 1: 최종 상태 '정상'<br>CASE 2: 최종 상태 '의심'<br>CASE 3: 최종 상태 '위조' | CASE 1: 합산 로직 오류(점수 누락)<br>CASE 2: 최종 상태 판별 불가<br>CASE 3: 비정상적인 점수 범위 입력 | 2.1.4 2.2.3 2.3.5 | L | P |
| 6.5 | 보이스피싱 의심 패턴 분석 API | 탐지 모델을 사용하여 전사 텍스트 내 보이스피싱 의심 키워드를 분석하고 위험도 점수를 산출한다. |  |  |  |  | 1.2 |  |  |
| 6.5.1 |  |  | 탐지 모델로 전달된 전사 텍스트에서 핵심 의심 키워드를 인식 및 검출한다. | 전사 텍스트,<br>핵심 키워드 사전 | CASE 1: 정상 텍스트에서 키워드 미검출<br>CASE 2: 1개 이상 의심 키워드 검출<br>CASE 3: 빈 텍스트 입력 | CASE 1: 키워드 사전 접근 실패<br>CASE 2: 텍스트 형식 오류<br>CASE 3: 모델 처리 시간 초과 | 1.1.3 | H | P |
| 6.5.2 |  |  | 탐지 모델은 검출한 의심 항목에 사전 학습된 위험도 가중치를 부여하고, 반복 발생 시 위험도 점수를 가산한다. | 의심 항목 목록,<br>위험도 가중치 맵,<br>반복 횟수 정보 | CASE 1: 정상 항목만 포함된 목록<br>CASE 2: 의심 항목 1개 포함<br>CASE 3: 동일 의심 항목 반복 포함 | CASE 1: 가중치 맵 접근 실패<br>CASE 2: 목록 내 형식 오류 데이터<br>CASE 3: 반복 가산 로직 오류 | 1.2.1 | H | P |
| 6.6 | 피싱 의심 메시지 내용 분석 API | 3.2에 정의된 분석 로직을 수행하는 API를 제공한다. |  |  |  |  | 3.2 |  |  |
| 6.6.1 |  |  | 전처리된 메세지 텍스트를 전달받아 사전 학습된 모델에 입력한다. | 전처리된 텍스트,<br>모델 입력 포맷 규칙 | CASE 1: 규칙에 맞는 유효한 텍스트<br>CASE 2: 최소 길이 충족<br>CASE 3: 모델 최대 입력 길이 이하 | CASE 1: 텍스트 포맷 오류<br>CASE 2: 텍스트 내용 없음<br>CASE 3: 모델 최대 입력 길이 초과 | 3.2.2 | H | P |
| 6.6.2 |  |  | 입력된 데이터를 키워드 빈도 및 가중치 기반으로 최종 위험도 점수를 합산하여 반환한다. | 모델 입력 텍스트,<br>키워드 빈도수,<br>키워드 가중치 값 | CASE 1: 정상적인 텍스트 및 가중치 입력<br>CASE 2: 위험도 점수 0점<br>CASE 3: 위험도 최대 점수 | CASE 1: 키워드 빈도수/가중치 값 누락<br>CASE 2: 비정상적인 가중치 값(음수)<br>CASE 3: 점수 합산 로직 오류 | 3.2.3 | L | P |
